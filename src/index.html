<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Carbon-Cap</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      /* Add custom CSS styles if needed */
      .scrollable-section {
        height: 200px;
        overflow-y: scroll;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 class="text-center">An Government Regulatory for Carbon Credits</h1>
      <hr />

      <!-- Profile Section for Government -->
      <div class="row">
        <div class="col-md-12">
          <div class="form-group">
            <span> Name: Government of India </span>
          </div>
          <div class="form-group">
            <span> Address: hex code </span>
          </div>
        </div>
      </div>

      <!-- Factory Emissions Data Table -->
      <div class="row">
        <div class="col-md-12">
          <h3>Factory Emissions Data</h3>
          <div class="scrollable-section">
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Factory Address</th>
                  <th>Total Emission Data (MTCO2e)</th>
                  <th>Available Credits (MTCO2e)</th>
                  <th>Verify</th>
                </tr>
              </thead>
              <tbody id="factoryEmissionsTable">
                <!-- Factory emission data will load here -->
              </tbody>
            </table>
          </div>
        </div>
        <p>Total Emission : Sum of the emission</p>
      </div>

      <!-- Certification and Verification Forms -->
      <div class="row">
        <div class="col-md-6">
          <h3>Certify Organization</h3>
          <form id="certifyOrganizationForm">
            <div class="form-group">
              <label for="organizationAddress">Organization Address:</label>
              <input
                type="text"
                class="form-control"
                id="organizationAddress"
                placeholder="Organization Address"
              />
            </div>
            <button type="submit" class="btn btn-primary">Certify</button>
          </form>
        </div>
      </div>

      <!-- Factory Emissions Data Table -->
      <div class="row">
        <div class="col-md-12">
          <h3>Certified organizaitons</h3>
          <div class="scrollable-section">
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Org's Address</th>
                  <th>Available Credits (MTCO2e)</th>
                  <th>Take Action</th>
                </tr>
              </thead>
              <tbody id="factoryEmissionsTable">
                <!-- Factory emission data will load here -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
      x
    </div>

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Web3.js and Contract ABI -->
    <!-- Include your Web3.js, Contract ABI, and necessary script here -->
    <script>
      // JavaScript code to interact with Web3.js and your smart contract
      // Write code to handle government profile form submission and interactions

      // Sample function to fetch available credits of each factory and display them
      function getAvailableCreditsForFactories() {
        // Mock data for factory addresses (replace with actual addresses)
        const factoryAddresses = [
          "0xFactoryAddress1",
          "0xFactoryAddress2",
          "0xFactoryAddress3",
        ];

        // Loop through factory addresses and fetch available credits for each factory
        factoryAddresses.forEach((factoryAddress) => {
          // Replace this part with your contract interaction code to get available credits for each factory
          const availableCredits = Math.floor(Math.random() * 100); // Replace with actual function call to get credits
          const newRow = `
          <tr>
            <td>${factoryAddress}</td>
            <td>Total Emission Data</td>
            <td>${availableCredits} MTCO2e</td>
            <td><button class="btn btn-primary">Verify</button></td>
          </tr>`;
          $("#factoryEmissionsTable").append(newRow);
        });
      }

      // Call the function to fetch and display available credits when the page loads
      $(document).ready(function () {
        getAvailableCreditsForFactories();
      });
    </script>
  </body>
</html>
